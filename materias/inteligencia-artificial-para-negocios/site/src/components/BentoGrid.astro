---
interface Item {
  badge: string;
  title: string;
  description: string;
  icon?: string;
}

interface Props {
  items: Item[];
  columns?: 2 | 3;
}

const { items, columns = 3 } = Astro.props as Props;

const gridClasses = {
  2: "md:grid-cols-2",
  3: "md:grid-cols-2 lg:grid-cols-3",
};
---

<section class:list={["bento-grid grid gap-6", gridClasses[columns]]}>
  {
    items.map((item, index) => (
      <article
        class="bento-card panel-orbital relative overflow-hidden rounded-3xl p-8 transition-all duration-300 hover:-translate-y-1 hover:border-red-400/50 hover:shadow-[0_0_45px_rgba(237,32,36,0.3)]"
        data-index={index}
      >
        {/* Badge */}
        <span class="inline-flex items-center gap-1 rounded-full border border-red-400/40 bg-red-500/20 px-3 py-1 text-[10px] uppercase tracking-[0.4em] text-red-200 backdrop-blur">
          {item.badge}
        </span>

        {/* Title */}
        <h3 class="mt-4 font-rajdhani text-2xl font-bold text-white">
          {item.title}
        </h3>

        {/* Description */}
        <p class="mt-3 text-sm leading-relaxed text-slate-200/80">
          {item.description}
        </p>

        {/* Icon (optional) */}
        {item.icon && (
          <div class="absolute bottom-6 right-6 opacity-10">
            <span class="text-6xl">{item.icon}</span>
          </div>
        )}

        {/* Glow effect on hover */}
        <div class="glow-effect pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-300" aria-hidden="true" />
      </article>
    ))
  }
</section>

<style>
  .bento-grid {
    grid-template-columns: 1fr;
  }

  @media (min-width: 768px) {
    .bento-grid.md\:grid-cols-2 {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .bento-grid.lg\:grid-cols-3 {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .bento-card {
    animation: fadeInUp 0.6s ease-out backwards;
  }

  .bento-card:nth-child(1) {
    animation-delay: 0.1s;
  }

  .bento-card:nth-child(2) {
    animation-delay: 0.2s;
  }

  .bento-card:nth-child(3) {
    animation-delay: 0.3s;
  }

  .bento-card:nth-child(4) {
    animation-delay: 0.4s;
  }

  .bento-card:nth-child(5) {
    animation-delay: 0.5s;
  }

  .bento-card:nth-child(6) {
    animation-delay: 0.6s;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .bento-card:hover .glow-effect {
    opacity: 1;
    background: radial-gradient(
      circle at top right,
      rgba(237, 32, 36, 0.15),
      transparent 60%
    );
  }

  @media (prefers-reduced-motion: reduce) {
    .bento-card {
      animation: none;
    }

    .bento-card:hover {
      transform: none;
    }
  }
</style>
